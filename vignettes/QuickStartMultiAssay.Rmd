---
title: "MultiAssayExperiment: Quick Start Guide"
author: "Marcel Ramos"
date: "`r format(Sys.time(), '%B %d, %Y')`"
vignette: >
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteIndexEntry{Quick-start Guide}
  %\VignetteEncoding{UTF-8}
output:
  BiocStyle::html_document:
    toc: yes
---

```{r, echo=FALSE, warning=FALSE}
suppressPackageStartupMessages({
    library(MultiAssayExperiment)
    library(S4Vectors)
    })
```

# Key Features of `MultiAssayExperiment`

## Slots

### pData - biological units

A `DataFrame` describing the characteristics of the biological units. In
[The Cancer Genome Atlas]() data, for example, the biological units are patients.

```{r}
pheno <- DataFrame(id = 1:4, type = c("a", "a", "b", "b"),
                   sex = c("M", "F", "M", "F"),
                   row.names = c("Bob", "Sandy", "Jake", "Lauren"))
```

### ExperimentList - experiment data

A base `list` or `ExperimentList` object containing the experimental datasets
for the set of samples collected. This gets converted into a class
`ExperimentList` during construction.

```{r}
dataset1 <- matrix(rnorm(20, 5, 1), ncol = 5,
                  dimnames = list(paste0("GENE", 4:1),
                                  paste0("sample", LETTERS[1:5])))
dataset2 <- matrix(rnorm(12, 3, 2), ncol = 3,
                   dimnames = list(paste0("ENST0000", 1:4),
                                   paste0("samp", letters[1:3])))

expList <- list(exp1 = dataset1, exp2 = dataset2)
expList
```

### sampleMap - relationship graph

A `DataFrame` graph representation of the relationship between the experiments
(`assay` column name), biological units (`primary`), and samples (`colname`).
Helper functions are available for creating a map from a list. See `?listToMap`

```{r}
map1 <- DataFrame(primary = c("Bob", "Jake", "Sandy", "Sandy", "Lauren"),
                  colname = paste0("sample", LETTERS[1:5]))
map2 <- DataFrame(primary = c("Jake", "Sandy", "Lauren"),
                  colname = paste0("samp", letters[1:3]))
sampMap <- listToMap(list(exp1 = map1, exp2 = map2))
sampMap
```


## MultiAssayExperiment - class constructor function

The `MultiAssayExperiment` constructor function can take three arguments:

1. `experiments` - An `ExperimentList` or `list` of data
2. `pData` - A `DataFrame` describing the biological units
3. `sampleMap` - A `DataFrame` of `assay`, `primary`, and `colname` identifiers

```{r}
MultiAssayExperiment(expList, pheno, sampMap)
```

## `prepMultiAssay` - Constructor function helper

The `prepMultiAssay` function allows the user to diagnose typical problems
when creating a `MultiAssayExperiment` object. See `?prepMultiAssay` for more
details.

[The Cancer Genome Atlas]: https://cancergenome.nih.gov/
